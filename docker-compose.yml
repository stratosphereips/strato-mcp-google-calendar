services:
  auth:
    build: .
    image: google-calendar-mcp:latest
    command: auth
    ports:
      - "8081:8081"
    env_file: .env
    environment:
      TOKEN_STORE_PATH: /tokens
    volumes:
      - tokens:/tokens

  mcp:
    build: .
    image: google-calendar-mcp:latest
    command: serve
    stdin_open: true
    env_file: .env
    environment:
      TOKEN_STORE_PATH: /tokens
    volumes:
      - tokens:/tokens

volumes:
  tokens:
    name: google-calendar-mcp-tokens
